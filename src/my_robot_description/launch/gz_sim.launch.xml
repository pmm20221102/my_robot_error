<launch>

  <!-- ============================= -->
  <!-- Path settings -->
  <!-- ============================= -->
  <let name="urdf_path"
       value="$(find-pkg-share my_robot_description)/urdf/robot/robot.urdf.xacro" />

  <let name="gazebo_config_path"
       value="$(find-pkg-share my_robot_description)/config/gz_bridge.yaml" />

  <let name="rviz_config_path"
       value="$(find-pkg-share my_robot_description)/rviz/urdf_config.rviz" />


  <!-- ============================= -->
  <!-- robot_state_publisher (xacro) -->
  <!-- ============================= -->
  <node pkg="robot_state_publisher" exec="robot_state_publisher">
    <param name="robot_description"
           value="$(command 'xacro $(var urdf_path)')" />
  </node>


  <!-- ============================= -->
  <!-- Gazebo Sim -->
  <!-- ============================= -->
  <include file="$(find-pkg-share ros_gz_sim)/launch/gz_sim.launch.py">
    <!-- Load your world file -->
    <arg name="gz_args"
         value="$(find-pkg-share my_robot_description)/world/robot_haus.sdf -r" />
  </include>


  <!-- ============================= -->
  <!-- Spawn robot in Gazebo -->
  <!-- ============================= -->
  <node pkg="ros_gz_sim" exec="create"
        args="-topic robot_description" />


  <!-- ============================= -->
  <!-- Gazebo ↔ ROS2 bridge -->
  <!-- ============================= -->
  <node pkg="ros_gz_bridge" exec="parameter_bridge">
    <param name="config_file" value="$(var gazebo_config_path)" />
  </node>


  <!-- ============================= -->
  <!-- Controllers (ros2_control) -->
  <!-- ============================= -->
  <node pkg="controller_manager" exec="spawner"
        args="joint_state_broadcaster" />

  <!-- <node pkg="controller_manager" exec="spawner"
        args="diff_drive_controller" /> -->

  <!-- （如果你有机械臂） -->
  <!-- <node pkg="controller_manager" exec="spawner"
        args="arm_joints_controller" /> -->


  <!-- ============================= -->
  <!-- RViz2 -->
  <!-- ============================= -->
  <!-- <node pkg="rviz2" exec="rviz2" output="screen"
        args="-d $(var rviz_config_path)" /> -->

</launch>
